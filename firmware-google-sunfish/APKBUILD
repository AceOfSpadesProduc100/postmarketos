pkgname=firmware-google-sunfish
pkgver=1
pkgrel=0
pkgdesc="Firmware for Google Pixel 4a"
subpackages="
	$pkgname-remoteprocs
	$pkgname-others
	"
url="https://github.com/AceOfSpadesProduc100/firmware-google-sunfish"
arch="aarch64"
license="proprietary"
options="!check !strip !archcheck !tracedeps pmb:cross-native"
_commit="83da3d88c0762c401320ed47e33d11ddd7f20027"
source="$pkgname-$_commit.tar.gz::$url/archive/$_commit/$pkgname-$_commit.tar.gz"
builddir="$srcdir/$pkgname-$_commit"

package() {
	# parent package is empty
	mkdir -p "$pkgdir"
}

remoteprocs() {
	pkgdesc="Google Pixel 4a remoteproc firmwares"

	# cp because of additional directories
	mkdir -p "$subpkgdir/lib/firmware/qcom/sm7150/sunfish/"
	cp -r "$builddir"/remoteprocs/* \
		"$subpkgdir/lib/firmware/qcom/sm7150/sunfish/"
	find "$subpkgdir/lib/firmware/qcom/sm7150/sunfish/" \
		-type f -exec chmod 0644 {} \;
}

others() {
	pkgdesc="Google Pixel 4a other firmwares"

	# cp because of additional directories
	mkdir -p "$subpkgdir/lib/firmware/"
	cp -r "$builddir"/others/* \
		"$subpkgdir/lib/firmware/"
	find "$subpkgdir/lib/firmware/" \
		-type f -exec chmod 0644 {} \;
}
sha512sums="
a57987d656dfa246e7800b07504c2f588445b090d754db5ec7cec7c7940d8d5902f50d573438912b5b87cd90231723e9ca230be72b3299737d5e4689ce2e4493  firmware-google-sunfish-83da3d88c0762c401320ed47e33d11ddd7f20027.tar.gz
"
